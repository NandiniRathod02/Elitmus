import{a0 as P,S as r,i as g,$ as R,_ as b,E as w}from"./general.js";import{r as h,j as _,d as S,i as E,u as v,o as A,c as B,a as d,t as L,s as T,_ as C}from"./i18n.js";const U="dashboard.html",f="tab",k="limits",Y="block.html",y="domain";function O(){const e=h(new URL(location.href)),a=_(()=>e.value.hostname=="hhfnghjdeddcfegfekjeihfmbjenlomm"&&e.value.pathname.includes(U)&&e.value.searchParams.get(f)==k),s=_(()=>{var t;return e.value.hostname=="hhfnghjdeddcfegfekjeihfmbjenlomm"&&e.value.pathname.includes(Y)&&((t=e.value.searchParams.get(y))==null?void 0:t.includes("youtube.com"))});function o(t){let c=P(t);const n=e.value.searchParams.get(f);if(window.history.replaceState&&n){const l=`tab=${n}`,i=`tab=${c}`;window.history.replaceState(location.href,document.title,location.href.replace(l,i)),e.value=new URL(location.href)}}return{isLimitPage:a,isBlockPage:s,updateTab:o}}async function M(){const e=g(),a=O(),s=await e.getValue(r.PROMO_CLEAR_YOUTUBE_ON_LIMITS),o=await e.getValue(r.PROMO_CLEAR_YOUTUBE_ON_BLOCK),t=Object.values(await e.getValue(r.RESTRICTION_LIST,[])),c=_(()=>t.find(i=>i.domain=="youtube.com")!=null),n=_(()=>(s==null||s==!1)&&a.isLimitPage.value&&c.value),l=_(()=>(o==null||o==!1)&&a.isBlockPage.value);return n.value||l.value}const I={key:0,class:"review-block"},j={class:"btn-block"},x=["value"],N={name:"PromoClearYouTube"},V=S({...N,setup(e){const{t:a}=E(),s=g(),o=O(),t=h(!0),c=R(async()=>await M());async function n(){t.value=!1,await i()}async function l(){t.value=!1,window.open(w,"_blank"),await i()}async function i(){let u;o.isBlockPage.value&&(u=r.PROMO_CLEAR_YOUTUBE_ON_BLOCK),o.isLimitPage.value&&(u=r.PROMO_CLEAR_YOUTUBE_ON_LIMITS),u&&await s.saveValue(u,!0)}return(u,m)=>t.value&&v(c)?(A(),B("div",I,[d("p",null,L(v(a)("promoClearYoutube.message")),1),d("div",j,[d("img",{height:"15",src:b,onClick:m[0]||(m[0]=p=>n())}),d("input",{type:"button",value:v(a)("promoClearYoutube.description"),onClick:m[1]||(m[1]=p=>l())},null,8,x)])])):T("",!0)}});const D=C(V,[["__scopeId","data-v-76a7edcf"]]);export{D as P,O as u};
